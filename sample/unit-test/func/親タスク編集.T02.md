# 親タスク編集(T02) テストケース一覧

## 正常系テスト

### T02-C1001
- 正常系
- テスト観点
    - 親タスクの編集が正常に完了すること
    - レスポンスのステータスコードが200であること
    - 更新されたタスク情報が正しく返却されること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "更新されたタスクタイトル"
    - description: "更新されたタスク詳細"
- 期待値
    - HTTPステータス: 200
    - レスポンス: 更新されたタスク情報（parent_task_id, title, description, status, updated_at）
    - ログ: I-T0002

### T02-C1002
- 正常系（詳細を空文字列で更新）
- テスト観点
    - 詳細を空文字列で親タスクの編集が正常に完了すること
    - レスポンスのステータスコードが200であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "更新されたタスクタイトル"
    - description: ""
- 期待値
    - HTTPステータス: 200
    - レスポンス: 更新されたタスク情報（descriptionはNULL）
    - ログ: I-T0002

### T02-C1003
- 正常系（255文字のタイトル）
- テスト観点
    - 最大文字数のタイトルで親タスクの編集が正常に完了すること
    - レスポンスのステータスコードが200であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "a"を255文字繰り返した文字列
    - description: "詳細"
- 期待値
    - HTTPステータス: 200
    - レスポンス: 更新されたタスク情報
    - ログ: I-T0002

## 異常系テスト（認証エラー）

### T02-E2001
- 異常系
    - 認証トークンなし
- テスト観点
    - 認証トークンが提供されていない場合のエラー処理
    - エラーメッセージ「E-T0007」が出力されること
    - レスポンスのステータスコードが401であること
- 入力値
    - Authorization: なし
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 401
    - ログ: E-T0007

### T02-E2002
- 異常系
    - 無効な認証トークン
- テスト観点
    - 無効な認証トークンの場合のエラー処理
    - エラーメッセージ「E-T0008」が出力されること
    - レスポンスのステータスコードが401であること
- 入力値
    - Authorization: Bearer 無効なトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 401
    - ログ: E-T0008

## 異常系テスト（タスク存在・所有者確認エラー）

### T02-E2003
- 異常系
    - 存在しないタスクID
- テスト観点
    - 存在しないタスクIDを指定した場合のエラー処理
    - エラーメッセージ「E-T0010」が出力されること
    - レスポンスのステータスコードが404であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 999999
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 404
    - ログ: E-T0010

### T02-E2004
- 異常系
    - 他ユーザのタスク編集
- テスト観点
    - 他ユーザが作成したタスクを編集しようとした場合のエラー処理
    - エラーメッセージ「E-T0010」が出力されること
    - レスポンスのステータスコードが404であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン（ユーザA）
    - 親タスクID: ユーザBが作成したタスクのID
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 404
    - ログ: E-T0010

## 異常系テスト（バリデーションエラー）

### T02-E2005
- 異常系
    - タイトルが空文字列
- テスト観点
    - タイトルが空文字列の場合のバリデーションエラー
    - エラーメッセージ「E-T0011」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: ""
    - description: "詳細"
- 期待値
    - HTTPステータス: 400
    - ログ: E-T0011

### T02-E2006
- 異常系
    - タイトルが256文字
- テスト観点
    - タイトルが最大文字数を超えた場合のバリデーションエラー
    - エラーメッセージ「E-T0011」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "a"を256文字繰り返した文字列
    - description: "詳細"
- 期待値
    - HTTPステータス: 400
    - ログ: E-T0011

### T02-E2007
- 異常系
    - タイトルが文字列以外
- テスト観点
    - タイトルが文字列以外の場合のバリデーションエラー
    - エラーメッセージ「E-T0011」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: 123
    - description: "詳細"
- 期待値
    - HTTPステータス: 400
    - ログ: E-T0011

### T02-E2008
- 異常系
    - 詳細が65536文字
- テスト観点
    - 詳細が最大文字数を超えた場合のバリデーションエラー
    - エラーメッセージ「E-T0012」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "a"を65536文字繰り返した文字列
- 期待値
    - HTTPステータス: 400
    - ログ: E-T0012

### T02-E2009
- 異常系
    - 詳細が文字列以外
- テスト観点
    - 詳細が文字列以外の場合のバリデーションエラー
    - エラーメッセージ「E-T0012」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: 123
- 期待値
    - HTTPステータス: 400
    - ログ: E-T0012

## 異常系テスト（データベースエラー）

### T02-E2010
- 異常系
    - DB接続エラー（タスク存在確認時）
- テスト観点
    - タスク存在確認時のDB接続エラーの処理
    - エラーメッセージ「E-T0009」が出力されること
    - レスポンスのステータスコードが500であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 500
    - ログ: E-T0009
- 備考
    - DBを停止して実行

### T02-E2011
- 異常系
    - DB接続エラー（更新時）
- テスト観点
    - タスク更新時のDB接続エラーの処理
    - エラーメッセージ「E-T0013」が出力されること
    - レスポンスのステータスコードが500であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 500
    - ログ: E-T0013
- 備考
    - タスク存在確認後にDBを停止して実行

### T02-E2012
- 異常系
    - DB更新失敗
- テスト観点
    - DB更新が失敗した場合のエラー処理
    - エラーメッセージ「E-T0014」が出力されること
    - レスポンスのステータスコードが500であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 500
    - ログ: E-T0014
- 備考
    - DB制約違反やロック状況を想定