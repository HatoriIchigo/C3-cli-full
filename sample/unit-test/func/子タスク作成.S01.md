# 子タスク作成(S01) テストケース一覧

## 正常系テスト

### S01-C1001
- 正常系
- テスト観点
    - 子タスクの作成が正常に完了すること
    - レスポンスのステータスコードが201であること
    - 作成された子タスク情報が正しく返却されること
    - デフォルトステータスが'pending'で設定されること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "新しい子タスク"
    - description: "子タスクの詳細"
- 期待値
    - HTTPステータス: 201
    - レスポンス: 作成された子タスク情報（child_task_id, parent_task_id, title, description, status='pending', created_at）
    - ログ: I-S0001

### S01-C1002
- 正常系（詳細を空文字列で作成）
- テスト観点
    - 詳細を空文字列で子タスクの作成が正常に完了すること
    - レスポンスのステータスコードが201であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "新しい子タスク"
    - description: ""
- 期待値
    - HTTPステータス: 201
    - レスポンス: 作成された子タスク情報（descriptionはNULL）
    - ログ: I-S0001

### S01-C1003
- 正常系（255文字のタイトル）
- テスト観点
    - 最大文字数のタイトルで子タスクの作成が正常に完了すること
    - レスポンスのステータスコードが201であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "a"を255文字繰り返した文字列
    - description: "詳細"
- 期待値
    - HTTPステータス: 201
    - レスポンス: 作成された子タスク情報
    - ログ: I-S0001

### S01-C1004
- 正常系（65535文字の詳細）
- テスト観点
    - 最大文字数の詳細で子タスクの作成が正常に完了すること
    - レスポンスのステータスコードが201であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "a"を65535文字繰り返した文字列
- 期待値
    - HTTPステータス: 201
    - レスポンス: 作成された子タスク情報
    - ログ: I-S0001

## 異常系テスト（認証エラー）

### S01-E2001
- 異常系
    - 認証トークンなし
- テスト観点
    - 認証トークンが提供されていない場合のエラー処理
    - エラーメッセージ「E-S0001」が出力されること
    - レスポンスのステータスコードが401であること
- 入力値
    - Authorization: なし
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 401
    - ログ: E-S0001

### S01-E2002
- 異常系
    - 無効な認証トークン
- テスト観点
    - 無効な認証トークンの場合のエラー処理
    - エラーメッセージ「E-S0002」が出力されること
    - レスポンスのステータスコードが401であること
- 入力値
    - Authorization: Bearer 無効なトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 401
    - ログ: E-S0002

## 異常系テスト（親タスク確認エラー）

### S01-E2003
- 異常系
    - 存在しない親タスクID
- テスト観点
    - 存在しない親タスクIDを指定した場合のエラー処理
    - エラーメッセージ「E-S0004」が出力されること
    - レスポンスのステータスコードが404であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 999999
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 404
    - ログ: E-S0004

### S01-E2004
- 異常系
    - 他ユーザの親タスク
- テスト観点
    - 他ユーザが作成した親タスクに子タスクを作成しようとした場合のエラー処理
    - エラーメッセージ「E-S0004」が出力されること
    - レスポンスのステータスコードが404であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン（ユーザA）
    - 親タスクID: ユーザBが作成した親タスクのID
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 404
    - ログ: E-S0004

### S01-E2005
- 異常系
    - 無効な親タスクID形式
- テスト観点
    - 数値以外の親タスクIDを指定した場合のエラー処理
    - 適切なエラーハンドリングが行われること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: "abc"
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 400または404
- 備考
    - URLパラメータの型変換エラーまたは存在しない親タスクとして扱われる

## 異常系テスト（バリデーションエラー）

### S01-E2006
- 異常系
    - タイトルが空文字列
- テスト観点
    - タイトルが空文字列の場合のバリデーションエラー
    - エラーメッセージ「E-S0005」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: ""
    - description: "詳細"
- 期待値
    - HTTPステータス: 400
    - ログ: E-S0005

### S01-E2007
- 異常系
    - タイトルが256文字
- テスト観点
    - タイトルが最大文字数を超えた場合のバリデーションエラー
    - エラーメッセージ「E-S0005」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "a"を256文字繰り返した文字列
    - description: "詳細"
- 期待値
    - HTTPステータス: 400
    - ログ: E-S0005

### S01-E2008
- 異常系
    - タイトルが文字列以外
- テスト観点
    - タイトルが文字列以外の場合のバリデーションエラー
    - エラーメッセージ「E-S0005」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: 123
    - description: "詳細"
- 期待値
    - HTTPステータス: 400
    - ログ: E-S0005

### S01-E2009
- 異常系
    - 詳細が65536文字
- テスト観点
    - 詳細が最大文字数を超えた場合のバリデーションエラー
    - エラーメッセージ「E-S0006」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "a"を65536文字繰り返した文字列
- 期待値
    - HTTPステータス: 400
    - ログ: E-S0006

### S01-E2010
- 異常系
    - 詳細が文字列以外
- テスト観点
    - 詳細が文字列以外の場合のバリデーションエラー
    - エラーメッセージ「E-S0006」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: 123
- 期待値
    - HTTPステータス: 400
    - ログ: E-S0006

### S01-E2011
- 異常系
    - タイトルが未定義
- テスト観点
    - 必須項目のタイトルが未定義の場合のバリデーションエラー
    - エラーメッセージ「E-S0005」が出力されること
    - レスポンスのステータスコードが400であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - description: "詳細"
- 期待値
    - HTTPステータス: 400
    - ログ: E-S0005
- 備考
    - titleフィールドが存在しない場合

## 異常系テスト（データベースエラー）

### S01-E2012
- 異常系
    - DB接続エラー（親タスク確認時）
- テスト観点
    - 親タスク確認時のDB接続エラーの処理
    - エラーメッセージ「E-S0003」が出力されること
    - レスポンスのステータスコードが500であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 500
    - ログ: E-S0003
- 備考
    - DBを停止して実行

### S01-E2013
- 異常系
    - DB接続エラー（子タスク登録時）
- テスト観点
    - 子タスク登録時のDB接続エラーの処理
    - エラーメッセージ「E-S0007」が出力されること
    - レスポンスのステータスコードが500であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 500
    - ログ: E-S0007
- 備考
    - 親タスク確認後にDBを停止して実行

### S01-E2014
- 異常系
    - DB登録失敗
- テスト観点
    - DB登録が失敗した場合のエラー処理
    - エラーメッセージ「E-S0008」が出力されること
    - レスポンスのステータスコードが500であること
- 入力値
    - Authorization: Bearer 有効なJWTトークン
    - 親タスクID: 1
    - title: "タスクタイトル"
    - description: "詳細"
- 期待値
    - HTTPステータス: 500
    - ログ: E-S0008
- 備考
    - DB制約違反やディスク容量不足を想定