# ログイン機能(U02) 単体テストケース一覧

## 概要
- 機能名：ログイン(U02)
- 概要：ユーザ名・パスワードによるログイン認証機能のテストケース

## 正常系テストケース

### U02-C1001
- 正常系
- テスト観点
  - 正常なログイン処理が完了すること
  - JWTトークンが正常に生成されること
  - レスポンスのステータスコードが200であること
- 入力値
  - username: testuser
  - password: Password123
- 期待結果
  - ログイン成功
  - JWTトークンが返却される
  - ステータスコード: 200

## 異常系テストケース（入力バリデーション）

### U02-E2001
- 異常系
  - ユーザ名バリデーションエラー（空文字）
- テスト観点
  - バリデーションエラーが発生すること
  - エラーメッセージ「E-U0201」が出力されること
  - レスポンスのステータスコードが400であること
- 入力値
  - username: （空文字）
  - password: Password123

### U02-E2002
- 異常系
  - ユーザ名バリデーションエラー（50文字超過）
- テスト観点
  - バリデーションエラーが発生すること
  - エラーメッセージ「E-U0201」が出力されること
  - レスポンスのステータスコードが400であること
- 入力値
  - username: abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz（52文字）
  - password: Password123

### U02-E2003
- 異常系
  - ユーザ名バリデーションエラー（英数字以外の文字）
- テスト観点
  - バリデーションエラーが発生すること
  - エラーメッセージ「E-U0201」が出力されること
  - レスポンスのステータスコードが400であること
- 入力値
  - username: test@user
  - password: Password123

### U02-E2004
- 異常系
  - パスワードバリデーションエラー（空文字）
- テスト観点
  - バリデーションエラーが発生すること
  - エラーメッセージ「E-U0202」が出力されること
  - レスポンスのステータスコードが400であること
- 入力値
  - username: testuser
  - password: （空文字）

### U02-E2005
- 異常系
  - パスワードバリデーションエラー（8文字未満）
- テスト観点
  - バリデーションエラーが発生すること
  - エラーメッセージ「E-U0202」が出力されること
  - レスポンスのステータスコードが400であること
- 入力値
  - username: testuser
  - password: Pass123（7文字）

### U02-E2006
- 異常系
  - パスワードバリデーションエラー（50文字超過）
- テスト観点
  - バリデーションエラーが発生すること
  - エラーメッセージ「E-U0202」が出力されること
  - レスポンスのステータスコードが400であること
- 入力値
  - username: testuser
  - password: abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz（52文字）

## 異常系テストケース（データベース接続）

### U02-E2007
- 異常系
  - データベース接続エラー
- テスト観点
  - DB接続エラーが発生すること
  - エラーメッセージ「E-U0203」が出力されること
  - レスポンスのステータスコードが500であること
- 入力値
  - username: testuser
  - password: Password123
- 備考
  - DBサーバを停止状態でテスト実行

## 異常系テストケース（ユーザ存在確認）

### U02-E2008
- 異常系
  - 存在しないユーザでのログイン試行
- テスト観点
  - ユーザ不存在エラーが発生すること
  - エラーメッセージ「E-U0204」が出力されること
  - レスポンスのステータスコードが401であること
- 入力値
  - username: nonexistentuser
  - password: Password123

## 異常系テストケース（パスワード照合）

### U02-E2009
- 異常系
  - 間違ったパスワードでのログイン試行
- テスト観点
  - パスワード照合エラーが発生すること
  - エラーメッセージ「E-U0205」が出力されること
  - レスポンスのステータスコードが401であること
- 入力値
  - username: testuser
  - password: WrongPassword

### U02-E2010
- 異常系
  - bcrypt処理エラー
- テスト観点
  - bcrypt処理エラーが発生すること
  - エラーメッセージ「E-U0206」が出力されること
  - レスポンスのステータスコードが500であること
- 入力値
  - username: testuser
  - password: Password123
- 備考
  - bcryptライブラリの処理で例外が発生する状況を模擬

## 異常系テストケース（JWTトークン生成）

### U02-E2011
- 異常系
  - JWTトークン生成エラー
- テスト観点
  - トークン生成エラーが発生すること
  - エラーメッセージ「E-U0207」が出力されること
  - レスポンスのステータスコードが500であること
- 入力値
  - username: testuser
  - password: Password123
- 備考
  - JWT_SECRET環境変数が設定されていない状況を模擬

## テストデータ準備

### 事前準備データ
- テスト用ユーザ
  - username: testuser
  - password: Password123（ハッシュ化済み）
  - 作成日時: テスト実行前に作成

### テスト実行後のクリーンアップ
- テスト用データの削除
- テスト実行ログの確認