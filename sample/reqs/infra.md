# インフラ要件定義書

## プラットフォームの選定

**Amazon Web Services (AWS)**
- メモで明示的にAWS利用が指定されている
- 個人開発でコスパ重視のため、AWS無料利用枠を最大限活用
- 手動運用を前提としたシンプルな構成

## 各種リソース

### 1. 全体
- **リージョン**: ap-northeast-1（東京リージョン）
- **アベイラビリティーゾーン**: 1つのAZのみ使用（コスト重視）

### 2. ネットワーク
- **VPC**: 1つ（10.0.0.0/16）
- **パブリックサブネット**: 1つ（10.0.1.0/24）
- **インターネットゲートウェイ**: 1つ
- **ルートテーブル**: パブリックサブネット用1つ
- **セキュリティグループ**: 
  - フロントエンド用（HTTP/HTTPS許可）
  - バックエンド用（API通信許可）
  - RDS用（MySQL通信許可）

### 3. コンピューティングサービス
- **EC2（フロントエンド）**: 1台
  - インスタンスタイプ: t2.micro（無料利用枠）
  - OS: Amazon Linux 2023
  - 用途: React アプリケーション配信
- **EC2（バックエンド）**: 1台
  - インスタンスタイプ: t2.micro（無料利用枠）
  - OS: Amazon Linux 2023
  - 用途: Node.js + Express API サーバ

### 4. DB
- **RDS MySQL**: 1つ
  - インスタンスクラス: db.t3.micro（無料利用枠）
  - エンジンバージョン: MySQL 8.0
  - ストレージ: 20GB（gp2）
  - マルチAZ: 無効（コスト重視）
  - 自動バックアップ: 7日間保持

### 5. ストレージ
- **EBS**: EC2インスタンス用
  - フロントエンド用: 8GB（gp3）
  - バックエンド用: 8GB（gp3）
- **S3**: 不要（静的ファイル最小限のため）

### 6. CI/CD
- **GitHub Actions**: 
  - ソースコード管理・自動デプロイ
  - EC2への自動デプロイ設定
- **GitHub**: ソースコードリポジトリ

### 7. セキュリティ
- **AWS Certificate Manager (ACM)**: HTTPS証明書（無料）
- **IAM**: 最小権限の原則に基づくロール設定
- **セキュリティグループ**: 必要最小限のポート開放
- **WAF**: 不要（個人利用・コスト重視のため）
- **Secrets Manager**: 不要（シンプル構成のため環境変数で管理）

### 8. ログ
- **CloudWatch Logs**: 
  - EC2アプリケーションログ
  - RDS エラーログ
- **CloudWatch**: 基本監視メトリクス（無料範囲内）

### 9. その他
- **Elastic IP**: フロントエンド・バックエンド用各1つ
- **Route 53**: 不要（IPアドレス直接アクセス）
- **ALB/ELB**: 不要（単一インスタンス構成）
- **Lambda**: 不要（シンプル構成のため）

## チェックリスト

### ✅ リソースに過不足がないかの確認

**✅ 必要なリソース（適切に選定済み）**
- ⭕ コンピューティング（EC2 x2台） → フロント・バック分離
- ⭕ データベース（RDS MySQL） → ユーザ・タスクデータ管理
- ⭕ ネットワーク（VPC・サブネット） → インターネット接続環境
- ⭕ セキュリティ（セキュリティグループ・HTTPS） → 基本的なセキュリティ確保
- ⭕ 監視（CloudWatch） → 基本監視機能
- ⭕ CI/CD（GitHub Actions） → 自動デプロイ
- ⭕ ストレージ（EBS） → OS・アプリケーション領域

**✅ 不要なリソース（適切に除外済み）**
- ❌ マルチAZ構成 → 個人利用・コスト重視のため不要
- ❌ Auto Scaling → 固定負荷・コスト重視のため不要  
- ❌ Load Balancer → 単一インスタンスのため不要
- ❌ WAF・Shield → 個人利用のため不要
- ❌ S3 → 静的ファイル最小限のため不要
- ❌ Lambda → シンプル構成のため不要

**結果: リソース選定に過不足なし ✅**