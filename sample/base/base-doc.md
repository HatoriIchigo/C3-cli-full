# ToDoアプリケーション 基本設計書

## はじめに

### 本書の目的
本書は、ToDoアプリケーションの基本設計を定義し、詳細設計・実装フェーズの指針となる文書です。個人開発・学習目的に特化したシンプルなバックエンドAPIアプリケーションの全体像、技術方針を明確にし、効率的な学習と実装を支援することを目的としています。

### システム概要
FastAPIを基盤としたRESTful APIアプリケーションです。個人利用・学習目的に特化し、コストを抑えたシンプルな構成で実装します。ToDo管理と外部API連携の実践的な開発経験習得を重視し、理解しやすいアーキテクチャを採用します。

### 基本設計書の記載範囲
本書では以下の内容を記載します：
- システム全体構成とアーキテクチャ方針
- 環境・インフラの基本方針
- バックエンドアプリケーションの技術方針
- 非機能要件の基本方針

## システム全体構成

### アーキテクチャ構成
本システムは、バックエンドAPIを中心とした軽量な構成を採用します。

```
[外部クライアント] ←→ [バックエンドAPI(FastAPI)] ←→ [データベース(RDS MySQL)]
                              ↓
                      [外部API(郵便番号検索)]
```

### 実装対象
**バックエンドAPIアプリケーション（主要機能）**
- ToDoアイテム管理のRESTful API
- 郵便番号検索連携API
- JSON形式でのデータ入出力

**フロントエンド（補助機能・任意）**
- API確認用の簡易Webインターフェース
- 学習・テスト目的での利用
- 必要に応じて削除可能

### デプロイ環境方針
- **開発環境**: ローカル環境での開発・テストを基本
- **本番環境**: AWS最小構成（学習・コスト重視）
- **段階的移行**: ローカル → AWS へ段階的に移行

## インターフェース設計

### 外部API連携
**郵便番号検索API**
- **プロトコル**: HTTPS
- **データ形式**: JSON
- **認証**: APIキー方式（学習目的）
- **用途**: 外部システム連携の実装経験習得

### 提供API（概要）
**RESTful API仕様**
- **データ形式**: JSON
- **認証**: なし（個人利用・学習目的）
- **CORS**: 開発環境では緩い設定、本番では適切に制限

## データ設計（概要）

### データモデル基本方針
**ToDoアイテム**
- 基本属性：ID、タイトル、説明、作成日時、完了状態
- 拡張属性：住所情報（郵便番号、住所）
- 関係性：単一エンティティ（シンプルな構成）

### データストレージ方針
- **開発環境**: SQLite（軽量・簡単セットアップ）
- **本番環境**: RDS MySQL（AWS統合・学習目的）

## 技術方針

### 技術選定とその理由

#### バックエンド技術スタック
- **言語・フレームワーク**: Python + FastAPI
- **理由**: よくある構成で情報が豊富、学習しやすい
- **ORM**: SQLAlchemy（データベース抽象化）
- **バリデーション**: Pydantic（FastAPI標準）

#### データベース
- **MySQL 8.0**
- **理由**: よくある構成で情報が豊富、RDSサポート充実

#### フロントエンド技術スタック（任意）
- **React + TypeScript**
- **理由**: よくある構成、APIテスト用途

### 開発・運用方針
- **コーディング規約**: PEP 8（Python）、Prettier（JavaScript）
- **テスト方針**: pytest（バックエンド）による基本テスト
- **デプロイ**: 手動デプロイ（学習・コスト重視）

## OS・インフラ設計方針

### 本番環境構成（AWS）
**基本方針**: 個人開発・学習目的のためコスト最小化を重視

#### EC2構成
- **インスタンス数**: 1台（バックエンド専用）
- **インスタンスタイプ**: t3.micro（無料利用枠活用）
- **OS**: Ubuntu Server 22.04 LTS（安定性・情報豊富）

#### データベース
- **RDS MySQL**: db.t3.micro（最小構成）
- **ストレージ**: 20GB（最小構成）
- **バックアップ**: 7日間（AWS標準）

#### セキュリティ・アクセス制御
- **機密情報管理**: 
  - AWS Systems Manager Parameter Store（学習目的）
  - AWS Secrets Manager（データベース接続情報）
- **ネットワーク**: VPC、セキュリティグループによる最小権限アクセス

### 開発環境構成
- **ローカル開発**: Docker Compose（環境統一）
- **データベース**: SQLite または Docker MySQL
- **依存関係管理**: pip requirements.txt

### OS基本設定方針
- **タイムゾーン**: Asia/Tokyo
- **ログ管理**: 標準的なログローテーション
- **ユーザ管理**: 最小権限の専用ユーザー
- **パッケージ管理**: 必要最小限のパッケージ

## 非機能設計方針

### 性能・可用性方針
**基本方針**: 個人利用・学習目的のため高い可用性は要求しない
- **応答時間**: 3秒以内（ローカル環境基準）
- **同時利用者**: 1名（個人利用）
- **稼働時間**: 手動起動・停止（コスト重視）

### セキュリティ設計方針

#### 基本セキュリティ
- **入力値検証**: Pydantic、react-hook-form
- **SQLインジェクション対策**: SQLAlchemy ORM活用
- **XSS対策**: React標準エスケープ機能

#### 機密情報管理（学習目的）
- **Parameter Store**: アプリケーション設定値
- **Secrets Manager**: データベース接続情報
- **目的**: AWSサービス連携の学習経験

### 監視・ログ設計方針
**基本方針**: 学習目的のため軽量な監視
- **ログ出力**: 標準出力（JSON形式）
- **監視**: 基本的なヘルスチェックのみ
- **アラート**: 必要最小限（コスト考慮）

### 運用設計方針
- **デプロイ**: 手動デプロイ（学習・コスト重視）
- **バックアップ**: RDS自動バックアップ（7日間）
- **スケーリング**: 手動スケーリング（必要時のみ）
- **コスト管理**: リソース使用量の定期確認

## バッチ処理設計
**該当なし**: リアルタイム処理のみのため、バッチ処理は実装しない

## 帳票・出力設計  
**該当なし**: API応答（JSON形式）のみのため、帳票出力機能は実装しない

## 備考

### 段階的実装方針
1. **Phase 1**: ローカル環境でのMVP実装
2. **Phase 2**: AWS環境への移行（学習目的）
3. **Phase 3**: 機能拡張・改善（必要に応じて）

### 学習目的での技術選択
- よくある技術構成を採用し、情報収集・問題解決を容易にする
- AWS サービス（Parameter Store, Secrets Manager）は学習経験のため採用
- コストと学習効果のバランスを重視した設計